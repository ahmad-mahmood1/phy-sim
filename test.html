<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Uranus Orbit Simulation</title>
    <script type="importmap">
        {
            "imports": {
                "p5": "https://cdn.jsdelivr.net/npm/p5@1.9.0/+esm"
            }
        }
    </script>
</head>
<body>
    <script type="module">
        import p5 from 'p5';

        // Uranus orbital parameters
        const uranus = {
            semiMajorAxis: 2872500000, // km
            eccentricity: 0.047257, // eccentricity of Uranus' orbit
            axialTilt: 98 // degrees
        };

        // Orbital period of Uranus in years
        const orbitalPeriod = 84;

        // Temperature variation parameters (simplified)
        const tempMin = -224; // °C
        const tempMax = -204; // °C

        // Season names
        const seasons = ['Northern Summer', 'Northern Autumn', 'Northern Winter', 'Northern Spring'];

        // Function to calculate Uranus' position at a given year
        function calculatePosition(year) {
            const angle = (year / orbitalPeriod) * 2 * Math.PI;
            const radius = uranus.semiMajorAxis * (1 - uranus.eccentricity**2) / (1 + uranus.eccentricity * Math.cos(angle));
            const x = radius * Math.cos(angle);
            const y = radius * Math.sin(angle);
            return { x, y };
        }

        // Function to calculate temperature at a given year
        function calculateTemperature(year) {
            const angle = (year / orbitalPeriod) * 2 * Math.PI;
            return tempMin + (tempMax - tempMin) * (1 + Math.sin(angle)) / 2;
        }

        // Function to determine the current season
        function determineSeason(year) {
            const seasonIndex = Math.floor((year / orbitalPeriod) * 4) % 4;
            return seasons[seasonIndex];
        }

        // p5.js sketch
        const sketch = (p) => {
            let year = 0;
            let position;
            let temperature;
            let season;

            p.setup = () => {
                p.createCanvas(800, 800);
                p.angleMode(p.DEGREES);
            };

            p.draw = () => {
                p.background(220);

                // Draw the Sun
                p.fill(255, 204, 0);
                p.ellipse(p.width / 2, p.height / 2, 50, 50);

                // Calculate Uranus' position
                position = calculatePosition(year);
                temperature = calculateTemperature(year);
                season = determineSeason(year);

                // Draw Uranus' orbit
                p.noFill();
                p.stroke(0);
                p.strokeWeight(1);
                p.ellipse(p.width / 2, p.height / 2, uranus.semiMajorAxis / 1000000 * 2, uranus.semiMajorAxis / 1000000 * 2);

                // Draw Uranus
                p.fill(0, 128, 255);
                p.stroke(0);
                p.strokeWeight(1);
                p.ellipse(position.x / 1000000 + p.width / 2, position.y / 1000000 + p.height / 2, 20, 20);

                // Draw the four seasonal points
                const seasonalPoints = [
                    calculatePosition(orbitalPeriod / 4),
                    calculatePosition(orbitalPeriod / 2),
                    calculatePosition(orbitalPeriod * 3 / 4),
                    calculatePosition(0)
                ];
                p.fill(255, 0, 0);
                for (let i = 0; i < seasonalPoints.length; i++) {
                    p.ellipse(seasonalPoints[i].x / 1000000 + p.width / 2, seasonalPoints[i].y / 1000000 + p.height / 2, 5, 5);
                }

                // Display the current year, temperature, and season
                p.fill(0);
                p.noStroke();
                p.textSize(24);
                p.text(`Year: ${year.toFixed(2)}`, 10, 30);
                p.text(`Temperature: ${temperature.toFixed(2)}°C`, 10, 60);
                p.text(`Season: ${season}`, 10, 90);

                // Update the year
                year = (year + 0.1) % orbitalPeriod;
            };
        };

        // Create a new p5 instance
        new p5(sketch);
    </script>
</body>
</html>