<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #000000;
        }

        #canvas-container {
            position: relative;
            border: 2px solid #333;
            box-shadow: 0 0 20px #000;
        }
    </style>
    <script type="importmap">
        {
            "imports": {
                "p5": "https://cdn.jsdelivr.net/npm/p5@1.9.0/+esm"
            }
        }
    </script>

</head>

<body>
    <div id="canvas-container">
    </div>
    <script type="module">
        import p5 from 'p5';

        const sketch = (p) => {
            let particles = [];

            class Particle {
                constructor(x, y) {
                    this.pos = p.createVector(x, y);
                    this.vel = p5.Vector.random2D().mult(p.random(2, 6));
                    this.acc = p.createVector(0, 0.05);
                    this.lifespan = 255;
                    this.size = p.random(2, 5);
                    this.color = {
                        r: p.random(150, 255),
                        g: p.random(50, 150),
                        b: p.random(0, 50)
                    };
                }

                update() {
                    this.vel.add(this.acc);
                    this.pos.add(this.vel);
                    this.lifespan -= 2;
                    this.size = p.map(this.lifespan, 0, 255, 0, this.size);
                }

                display() {
                    p.noStroke();
                    p.fill(this.color.r, this.color.g, this.color.b, this.lifespan);
                    p.ellipse(this.pos.x, this.pos.y, this.size);
                }

                isFinished() {
                    return this.lifespan < 0;
                }
            }

            p.setup = () => {
                const canvas = p.createCanvas(600, 400);
                canvas.parent('canvas-container');
                p.background(0);
            };

            p.draw = () => {
                p.background(0, 25);
                for (let i = particles.length - 1; i >= 0; i--) {
                    particles[i].update();
                    particles[i].display();
                    if (particles[i].isFinished()) {
                        particles.splice(i, 1);
                    }
                }
            };

            p.mousePressed = () => {
                for (let i = 0; i < 100; i++) {
                    particles.push(new Particle(p.mouseX, p.mouseY));
                }
            };
        };

        const container = window.document.getElementById('canvas-container');
        new p5(sketch, container);
    </script>
</body>

</html>